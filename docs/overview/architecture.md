# AILMA ç³»ç»Ÿæ¶æ„

**é«˜å±‚æ¶æ„è®¾è®¡** - ç®€æ´æ˜äº†çš„ç³»ç»Ÿç»„ä»¶è¯´æ˜

---

## ğŸ—ï¸ æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Notion Workspace (å‰ç«¯)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“‹ æŒ‡ä»¤ä¸­å¿ƒ | ğŸ“… æ—¥å†è§†å›¾ | ğŸ“Š æŠ¥å‘Šå½’æ¡£  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–²
                        â”‚ Notion MCP
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Backend (Python FastAPI)              â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ”„ Notion Listener (è½®è¯¢æŒ‡ä»¤)            â”‚  â”‚
â”‚  â”‚  ğŸ§  AI Core (æ„å›¾è¯†åˆ« + ä»»åŠ¡æ‰§è¡Œ)         â”‚  â”‚
â”‚  â”‚  ğŸ“Š Report Generator (AI ç”ŸæˆæŠ¥å‘Š)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ”Œ MCP Integration Layer                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ Notion MCP Client                     â”‚  â”‚
â”‚  â”‚  â””â”€ Google Calendar MCP Client            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ’¾ PostgreSQL + Redis                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  External Services           â”‚
         â”‚  â€¢ Notion MCP Server         â”‚
         â”‚  â€¢ Google Calendar MCP       â”‚
         â”‚  â€¢ Claude API                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶

### 1. Notion Workspaceï¼ˆå‰ç«¯å±‚ï¼‰

**èŒè´£**: ç”¨æˆ·äº¤äº’ç•Œé¢

**åŒ…å«**:
- **æŒ‡ä»¤ä¸­å¿ƒæ•°æ®åº“**: ç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€æŒ‡ä»¤
- **æ—¥å†è§†å›¾æ•°æ®åº“**: åŒæ­¥æ˜¾ç¤º Google Calendar äº‹ä»¶
- **æŠ¥å‘Šå½’æ¡£æ•°æ®åº“**: å­˜å‚¨ç”Ÿæˆçš„æŠ¥å‘Š

**ä¼˜åŠ¿**:
- âœ… é›¶å‰ç«¯å¼€å‘
- âœ… å¼ºå¤§çš„æ•°æ®åº“å’Œè§†å›¾åŠŸèƒ½
- âœ… ç”¨æˆ·ç†Ÿæ‚‰çš„æ“ä½œç¯å¢ƒ

**è¯¦ç»†**: [Notion é›†æˆæ–‡æ¡£](../integrations/notion/README.md)

---

### 2. Notion Listenerï¼ˆç›‘å¬å™¨ï¼‰

**èŒè´£**: æ£€æµ‹å’Œæ¥æ”¶ç”¨æˆ·æŒ‡ä»¤

**å·¥ä½œæµç¨‹**:
```
1. æ¯ 30 ç§’è½®è¯¢"æŒ‡ä»¤ä¸­å¿ƒ"æ•°æ®åº“
2. æŸ¥æ‰¾çŠ¶æ€ä¸º "â³ Pending" çš„æŒ‡ä»¤
3. å°†æŒ‡ä»¤ä¼ é€’ç»™ AI Core
4. æ›´æ–°çŠ¶æ€ä¸º "ğŸ”„ Processing"
```

**æŠ€æœ¯**:
- ä½¿ç”¨ Notion MCP Client çš„ `query_database()` å·¥å…·
- å¼‚æ­¥è½®è¯¢ï¼ˆasyncioï¼‰

**è¯¦ç»†**: [å¼€å‘è€…æŒ‡å—](../guides/developer-guide.md#notion-listener)

---

### 3. AI Coreï¼ˆæ™ºèƒ½æ ¸å¿ƒï¼‰

**èŒè´£**: ç†è§£æŒ‡ä»¤å¹¶æ‰§è¡Œä»»åŠ¡

**å­ç»„ä»¶**:

#### 3.1 Task Parserï¼ˆä»»åŠ¡è§£æå™¨ï¼‰
```
è¾“å…¥: "æ˜å¤©ä¸‹åˆ3ç‚¹å’Œå›¢é˜Ÿå¼€ä¼š"
è¾“å‡º: {
  "intent": "calendar_create",
  "entities": {
    "title": "å›¢é˜Ÿä¼šè®®",
    "start_time": "2025-11-28T15:00:00+08:00",
    "duration": 60
  }
}
```

- **æŠ€æœ¯**: LangChain + Claude API
- **æ”¯æŒçš„æ„å›¾**: 8 ç§ï¼ˆæ—¥å†CRUDã€ç¬”è®°CRUDã€æŠ¥å‘Šç”Ÿæˆã€æŸ¥è¯¢ï¼‰

#### 3.2 Task Executorï¼ˆä»»åŠ¡æ‰§è¡Œå™¨ï¼‰
```
æ ¹æ® intent è°ƒç”¨ç›¸åº”çš„ MCP Clientï¼š
- calendar_create â†’ Google Calendar MCP
- note_create â†’ Notion MCP
- report_generate â†’ Report Generator
```

**è¯¦ç»†**: [ä»»åŠ¡è§£æåŠŸèƒ½](../features/task-parsing.md)

---

### 4. MCP Integration Layerï¼ˆé›†æˆå±‚ï¼‰

**èŒè´£**: ä¸å¤–éƒ¨æœåŠ¡é€šä¿¡

#### 4.1 Notion MCP Client

**8 ä¸ªå·¥å…·**:
- `search_notion()` - æœç´¢
- `create_page()` - åˆ›å»ºé¡µé¢ï¼ˆMarkdownï¼‰
- `query_database()` - æŸ¥è¯¢æ•°æ®åº“
- `update_database_item()` - æ›´æ–°è¡Œ
- `read_page_content()` - è¯»å–å†…å®¹
- ...æ›´å¤š

**è¯¦ç»†**: [Notion å·¥å…·å‚è€ƒ](../integrations/notion/tools-reference.md)

#### 4.2 Google Calendar MCP Client

**7 ä¸ªå·¥å…·**:
- `list_events()` - åˆ—å‡ºäº‹ä»¶
- `create_event()` - åˆ›å»ºäº‹ä»¶ï¼ˆè‡ªç„¶è¯­è¨€æ—¶é—´ï¼‰
- `update_event()` - æ›´æ–°
- `delete_event()` - åˆ é™¤
- `search_events()` - æœç´¢
- `get_free_busy()` - æŸ¥è¯¢ç©ºé—²
- `list_calendars()` - åˆ—å‡ºæ—¥å†

**è¯¦ç»†**: [Google Calendar å·¥å…·å‚è€ƒ](../integrations/google-calendar/tools-reference.md)

---

### 5. Report Generatorï¼ˆæŠ¥å‘Šç”Ÿæˆå™¨ï¼‰

**èŒè´£**: AI é©±åŠ¨çš„æŠ¥å‘Šç”Ÿæˆ

**å·¥ä½œæµç¨‹**:
```
1. ä» Google Calendar è·å–æ—¶é—´æ®µå†…çš„äº‹ä»¶
2. ä» Notion è·å–å®Œæˆçš„ä»»åŠ¡
3. ä½¿ç”¨ Claude API åˆ†æå’Œæ€»ç»“
4. ç”Ÿæˆ Markdown æ ¼å¼æŠ¥å‘Š
5. é€šè¿‡ Notion MCP åˆ›å»ºæŠ¥å‘Šé¡µé¢
```

**æ”¯æŒçš„æŠ¥å‘Šç±»å‹**:
- ğŸ“Š å‘¨æŠ¥ (Weekly Report)
- ğŸ“… æœˆæŠ¥ (Monthly Report)
- ğŸ“ˆ é¡¹ç›®æŠ¥å‘Š (Project Report)

**è¯¦ç»†**: [æŠ¥å‘Šç”ŸæˆåŠŸèƒ½](../features/report-generation.md)

---

### 6. Database Layerï¼ˆæ•°æ®å±‚ï¼‰

#### PostgreSQLï¼ˆä¸»æ•°æ®åº“ï¼‰

**è¡¨ç»“æ„**:
- `users` - ç”¨æˆ·ä¿¡æ¯
- `mcp_connections` - MCP è¿æ¥é…ç½®ï¼ˆOAuth tokensï¼‰
- `task_logs` - ä»»åŠ¡æ‰§è¡Œæ—¥å¿—
- `sync_status` - åŒæ­¥çŠ¶æ€è®°å½•

**è¯¦ç»†**: [æ•°æ®åº“ Schema](../reference/database-schema.md)

#### Redisï¼ˆç¼“å­˜å±‚ï¼‰

**ç”¨é€”**:
- ç¼“å­˜ Notion æŸ¥è¯¢ç»“æœ
- Celery ä»»åŠ¡é˜Ÿåˆ—
- é€Ÿç‡é™åˆ¶è®¡æ•°å™¨

---

## ğŸ”„ å®Œæ•´æµç¨‹ç¤ºä¾‹

### ç”¨æˆ·åˆ›å»ºæ—¥å†äº‹ä»¶

```
[ç”¨æˆ·] åœ¨ Notion æŒ‡ä»¤ä¸­å¿ƒè¾“å…¥:
    "æ˜å¤©ä¸‹åˆ3ç‚¹å’Œå›¢é˜Ÿå¼€ä¼šè®¨è®ºQ1è§„åˆ’"
       â†“
[Notion Listener] æ£€æµ‹åˆ°æ–°æŒ‡ä»¤ (çŠ¶æ€: Pending)
       â†“
[Task Parser] ä½¿ç”¨ Claude API è§£æ:
    intent: "calendar_create_with_note"
    entities: {
      title: "å›¢é˜Ÿä¼šè®® - Q1è§„åˆ’è®¨è®º",
      start_time: "2025-11-28T15:00:00+08:00",
      duration: 60
    }
       â†“
[Task Executor] æ‰§è¡Œä¸¤ä¸ªä»»åŠ¡:
    1. Google Calendar MCP â†’ create_event()
    2. Notion MCP â†’ create_page() (ä¼šè®®çºªè¦æ¨¡æ¿)
       â†“
[ç»“æœå›å†™] æ›´æ–° Notion æŒ‡ä»¤çŠ¶æ€:
    çŠ¶æ€: âœ… Done
    ç»“æœ: "å·²åˆ›å»ºä¼šè®®å¹¶ç”Ÿæˆçºªè¦"
    ç›¸å…³é“¾æ¥: [Google Calendar] [Notion Page]
```

**è€—æ—¶**: < 5 ç§’

---

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. æ¨¡å—åŒ–

- âœ… æ¯ä¸ªç»„ä»¶èŒè´£å•ä¸€
- âœ… ç»„ä»¶é—´é€šè¿‡æ ‡å‡†æ¥å£é€šä¿¡
- âœ… æ˜“äºæ›¿æ¢å’Œæ‰©å±•

### 2. MCP ä¼˜å…ˆ

- âœ… ç»Ÿä¸€ä½¿ç”¨ MCP åè®®é›†æˆå¤–éƒ¨æœåŠ¡
- âœ… OAuth ç”± MCP Server æ‰˜ç®¡
- âœ… æœªæ¥å¯è½»æ¾æ·»åŠ æ–°é›†æˆï¼ˆSlack MCP, GitHub MCP ç­‰ï¼‰

### 3. AI é©±åŠ¨

- âœ… è‡ªç„¶è¯­è¨€ä½œä¸ºç”¨æˆ·ç•Œé¢
- âœ… AI ç†è§£æ„å›¾ï¼Œæ— éœ€å›ºå®šå‘½ä»¤æ ¼å¼
- âœ… AI ç”ŸæˆæŠ¥å‘Šï¼ŒèŠ‚çœäººå·¥åŠ³åŠ¨

### 4. å¼‚æ­¥ä¼˜å…ˆ

- âœ… FastAPI å¼‚æ­¥å¤„ç†
- âœ… Celery åå°ä»»åŠ¡
- âœ… ä¸é˜»å¡ç”¨æˆ·æ“ä½œ

---

## ğŸ“ˆ å¯æ‰©å±•æ€§

### æ·»åŠ æ–°é›†æˆï¼ˆç¤ºä¾‹ï¼šSlack MCPï¼‰

```
1. åˆ›å»º integrations/slack/ ç›®å½•
2. æ·»åŠ  SlackMCPClient ç±»
3. åœ¨ Task Executor ä¸­æ·»åŠ  slack_send æ„å›¾å¤„ç†
4. æ›´æ–° mcp.json é…ç½®
```

**æ— éœ€ä¿®æ”¹**: æ ¸å¿ƒæ¶æ„ä»£ç 

### æ·»åŠ æ–°åŠŸèƒ½ï¼ˆç¤ºä¾‹ï¼šä»»åŠ¡æé†’ï¼‰

```
1. åœ¨ features/ ä¸­åˆ›å»º task-reminder.md æ–‡æ¡£
2. å®ç° ReminderService ç±»
3. æ·»åŠ  Celery å®šæ—¶ä»»åŠ¡
4. åœ¨ Task Parser ä¸­æ·»åŠ  remind æ„å›¾
```

**æ— éœ€ä¿®æ”¹**: å…¶ä»–åŠŸèƒ½æ¨¡å—

---

## ğŸ” å®‰å…¨è€ƒè™‘

- ğŸ”’ OAuth Tokens åŠ å¯†å­˜å‚¨ï¼ˆPostgreSQLï¼‰
- ğŸ”’ API Keys é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†
- ğŸ”’ Notion Webhook ç­¾åéªŒè¯
- ğŸ”’ Rate Limitingï¼ˆRedisï¼‰

**è¯¦ç»†**: [å®‰å…¨é…ç½®](../deployment/security.md)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[æŠ€æœ¯æ ˆ](./tech-stack.md)** - æŠ€æœ¯é€‰å‹è¯¦è§£
- **[å¿«é€Ÿå¼€å§‹](../guides/quick-start.md)** - 5 åˆ†é’Ÿè¿è¡Œé¡¹ç›®
- **[å¼€å‘è€…æŒ‡å—](../guides/developer-guide.md)** - ä»£ç ç»“æ„å’Œå¼€å‘æµç¨‹
- **[MCP åè®®](../reference/mcp-protocol.md)** - MCP åè®®è¯´æ˜

---

**æ–‡æ¡£**: [æ€»ç´¢å¼•](../INDEX.md)
**æœ€åæ›´æ–°**: 2025-11-27
